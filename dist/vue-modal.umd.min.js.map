{"version":3,"file":"vue-modal.umd.min.js","sources":["../node_modules/nanoid/non-secure/index.js","../node_modules/@linusborg/vue-simple-portal/dist/index.mjs","../src/Modal.vue","../src/Modal.vue?vue&type=template&id=524d3804&lang.js"],"sourcesContent":["// This alphabet uses a-z A-Z 0-9 _- symbols.\n// Symbols are generated for smaller size.\n// -_zyxwvutsrqponmlkjihgfedcba9876543210ZYXWVUTSRQPONMLKJIHGFEDCBA\nvar url = '-_'\n// Loop from 36 to 0 (from z to a and 9 to 0 in Base36).\nvar i = 36\nwhile (i--) {\n  // 36 is radix. Number.prototype.toString(36) returns number\n  // in Base36 representation. Base36 is like hex, but it uses 0–9 and a-z.\n  url += i.toString(36)\n}\n// Loop from 36 to 10 (from Z to A in Base36).\ni = 36\nwhile (i-- - 10) {\n  url += i.toString(36).toUpperCase()\n}\n\n/**\n * Generate URL-friendly unique ID. This method use non-secure predictable\n * random generator with bigger collision probability.\n *\n * @param {number} [size=21] The number of symbols in ID.\n *\n * @return {string} Random string.\n *\n * @example\n * const nanoid = require('nanoid/non-secure')\n * model.id = nanoid() //=> \"Uakgb_J5m9g-0JDMbcJqL\"\n *\n * @name nonSecure\n * @function\n */\nmodule.exports = function (size) {\n  var id = ''\n  i = size || 21\n  // Compact alternative for `for (var i = 0; i < size; i++)`\n  while (i--) {\n    // `| 0` is compact and faster alternative for `Math.floor()`\n    id += url[Math.random() * 64 | 0]\n  }\n  return id\n}\n","\n/**\n * vue-simple-portal\n * version: 0.1.4,\n * (c) Thorsten Lünborg, 2019\n * LICENCE: Apache-2.0\n * http://github.com/linusborg/vue-simple-portal\n*/\nimport Vue from 'vue';\nimport id from 'nanoid/non-secure';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar config = {\n  selector: \"vue-portal-target-\".concat(id())\n};\nvar setSelector = function setSelector(selector) {\n  return config.selector = selector;\n};\nvar isBrowser = typeof window !== 'undefined' && (typeof document === \"undefined\" ? \"undefined\" : _typeof(document)) !== undefined;\n\nvar TargetContainer = Vue.extend({\n  // as an abstract component, it doesn't appear in\n  // the $parent chain of components.\n  // which means the next parent of any component rendered inside of this oen\n  // will be the parent from which is was portal'd\n  abstract: true,\n  name: 'PortalOutlet',\n  props: ['nodes', 'tag'],\n  data: function data(vm) {\n    return {\n      updatedNodes: vm.nodes\n    };\n  },\n  render: function render(h) {\n    var nodes = this.updatedNodes && this.updatedNodes();\n    if (!nodes) return h();\n    return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag || 'DIV', nodes);\n  },\n  destroyed: function destroyed() {\n    var el = this.$el;\n    el.parentNode.removeChild(el);\n  }\n});\n\nvar Portal = Vue.extend({\n  name: 'VueSimplePortal',\n  props: {\n    disabled: {\n      type: Boolean\n    },\n    prepend: {\n      type: Boolean\n    },\n    selector: {\n      type: String,\n      default: function _default() {\n        return \"#\".concat(config.selector);\n      }\n    },\n    tag: {\n      type: String,\n      default: 'DIV'\n    }\n  },\n  render: function render(h) {\n    if (this.disabled) {\n      var nodes = this.$scopedSlots && this.$scopedSlots.default();\n      if (!nodes) return h();\n      return nodes.length < 2 && !nodes[0].text ? nodes : h(this.tag, nodes);\n    }\n\n    return h();\n  },\n  created: function created() {\n    if (!this.getTargetEl()) {\n      this.insertTargetEl();\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    // We only update the target container component\n    // if the scoped slot function is a fresh one\n    // The new slot syntax (since Vue 2.6) can cache unchanged slot functions\n    // and we want to respect that here.\n    this.$nextTick(function () {\n      if (!_this.disabled && _this.slotFn !== _this.$scopedSlots.default) {\n        _this.container.updatedNodes = _this.$scopedSlots.default;\n      }\n\n      _this.slotFn = _this.$scopedSlots.default;\n    });\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.unmount();\n  },\n  watch: {\n    disabled: {\n      immediate: true,\n      handler: function handler(disabled) {\n        disabled ? this.unmount() : this.$nextTick(this.mount);\n      }\n    }\n  },\n  methods: {\n    // This returns the element into which the content should be mounted.\n    getTargetEl: function getTargetEl() {\n      if (!isBrowser) return;\n      return document.querySelector(this.selector);\n    },\n    insertTargetEl: function insertTargetEl() {\n      if (!isBrowser) return;\n      var parent = document.querySelector('body');\n      var child = document.createElement(this.tag);\n      child.id = this.selector.substring(1);\n      parent.appendChild(child);\n    },\n    mount: function mount() {\n      var targetEl = this.getTargetEl();\n      var el = document.createElement('DIV');\n\n      if (this.prepend && targetEl.firstChild) {\n        targetEl.insertBefore(el, targetEl.firstChild);\n      } else {\n        targetEl.appendChild(el);\n      }\n\n      this.container = new TargetContainer({\n        el: el,\n        parent: this,\n        propsData: {\n          tag: this.tag,\n          nodes: this.$scopedSlots.default\n        }\n      });\n    },\n    unmount: function unmount() {\n      if (this.container) {\n        this.container.$destroy();\n        delete this.container;\n      }\n    }\n  }\n});\n\nfunction install(_Vue) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  _Vue.component(options.name || 'portal', Portal);\n\n  if (options.defaultSelector) {\n    setSelector(options.defaultSelector);\n  }\n}\n\nif (typeof window !== 'undefined' && window.Vue && window.Vue === Vue) {\n  // plugin was inlcuded directly in a browser\n  Vue.use(install);\n}\n\nexport default install;\nexport { Portal, config, setSelector };\n","<template>\n  <portal v-if=\"mount\" :selector=\"appendTo\">\n    <transition name=\"vm-backdrop-transition\" :enter-active-class=\"bgInClass\" :leave-active-class=\"bgOutClass\">\n      <div\n        v-show=\"show\"\n        :data-vm-backdrop-id=\"id\"\n        class=\"vm-backdrop\"\n        :class=\"bgClass\"\n        :style=\"{ 'z-index': zIndex - 1 }\"\n      ></div>\n    </transition>\n    <transition\n      name=\"vm-transition\"\n      :enter-active-class=\"inClass\"\n      :leave-active-class=\"outClass\"\n      @before-enter=\"beforeOpen\"\n      @enter=\"opening\"\n      @after-enter=\"afterOpen\"\n      @before-leave=\"beforeClose\"\n      @leave=\"closing\"\n      @after-leave=\"afterClose\"\n    >\n      <div\n        v-show=\"show\"\n        ref=\"vm-wrapper\"\n        :data-vm-wrapper-id=\"id\"\n        tabindex=\"-1\"\n        class=\"vm-wrapper\"\n        :class=\"wrapperClass\"\n        :style=\"{ 'z-index': zIndex, cursor: enableClose ? 'pointer' : 'default' }\"\n        role=\"dialog\"\n        :aria-label=\"title\"\n        aria-modal=\"true\"\n        :aria-describedby=\"`${id}-content`\"\n        :aria-labelledby=\"`${id}-title`\"\n        @click=\"clickOutside($event)\"\n        @keydown=\"keydown($event)\"\n      >\n        <div ref=\"vm\" class=\"vm\" :data-vm-id=\"id\" :class=\"modalClass\" :style=\"modalStyle\">\n          <slot name=\"titlebar\">\n            <div class=\"vm-titlebar\">\n              <h3 :id=\"`${id}-title`\" class=\"vm-title\">\n                {{ title }}\n              </h3>\n              <button\n                v-if=\"enableClose\"\n                type=\"button\"\n                class=\"vm-btn-close\"\n                :aria-label=\"closeLabel\"\n                @click.prevent=\"close\"\n              ></button>\n            </div>\n          </slot>\n          <slot name=\"content\">\n            <div :id=\"`${id}-content`\" class=\"vm-content\">\n              <slot></slot>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </transition>\n  </portal>\n</template>\n\n<script>\nimport { Portal } from '@linusborg/vue-simple-portal'\n\nconst TYPE_CSS = {\n  type: [String, Object, Array],\n  default: ''\n}\nconst FOCUSABLE_ELEMENTS =\n  'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\nlet animatingZIndex = 0\n\nexport default {\n  name: 'VueModal',\n  components: {\n    Portal\n  },\n  model: {\n    prop: 'basedOn',\n    event: 'close'\n  },\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    baseZindex: {\n      type: Number,\n      default: 1051\n    },\n    bgClass: TYPE_CSS,\n    wrapperClass: TYPE_CSS,\n    modalClass: TYPE_CSS,\n    modalStyle: TYPE_CSS,\n    inClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeIn' }),\n    outClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeOut' }),\n    bgInClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeIn' }),\n    bgOutClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeOut' }),\n    appendTo: {\n      type: String,\n      default: 'body'\n    },\n    live: {\n      type: Boolean,\n      default: false\n    },\n    enableClose: {\n      type: Boolean,\n      default: true\n    },\n    basedOn: {\n      type: Boolean,\n      default: false\n    },\n    closeLabel: {\n      type: String,\n      default: 'Close'\n    }\n  },\n  data() {\n    return {\n      zIndex: 0,\n      id: null,\n      show: false,\n      mount: false,\n      elToFocus: null\n    }\n  },\n  created() {\n    if (this.live) {\n      this.mount = true\n    }\n  },\n  mounted() {\n    this.id = 'vm-' + this._uid\n    this.$watch(\n      'basedOn',\n      function (newVal) {\n        if (newVal) {\n          this.mount = true\n          this.$nextTick(() => {\n            this.show = true\n          })\n        } else {\n          this.show = false\n        }\n      },\n      {\n        immediate: true\n      }\n    )\n  },\n  beforeDestroy() {\n    this.elToFocus = null\n  },\n  methods: {\n    close() {\n      if (this.enableClose === true) {\n        this.$emit('close', false)\n      }\n    },\n    clickOutside(e) {\n      if (e.target === this.$refs['vm-wrapper']) {\n        this.close()\n      }\n    },\n    keydown(e) {\n      if (e.which === 27 || e.keyCode === 27) {\n        this.close()\n      }\n      if (e.which === 9 || e.keyCode === 9) {\n        // Get only visible elements\n        const all = [].slice.call(this.$refs['vm-wrapper'].querySelectorAll(FOCUSABLE_ELEMENTS)).filter(function (el) {\n          return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length)\n        })\n\n        if (e.shiftKey) {\n          if (e.target === all[0] || e.target === this.$refs['vm-wrapper']) {\n            e.preventDefault()\n            all[all.length - 1].focus()\n          }\n        } else {\n          if (e.target === all[all.length - 1]) {\n            e.preventDefault()\n            all[0].focus()\n          }\n        }\n      }\n    },\n    getAllVisibleWrappers() {\n      return [].slice.call(document.querySelectorAll('[data-vm-wrapper-id]')).filter((w) => w.display !== 'none')\n    },\n    getTopZindex() {\n      return this.getAllVisibleWrappers().reduce((acc, curr) => {\n        return parseInt(curr.style.zIndex) > acc ? parseInt(curr.style.zIndex) : acc\n      }, 0)\n    },\n    handleFocus(wrapper) {\n      const autofocus = wrapper.querySelector('[autofocus]')\n\n      if (autofocus) {\n        autofocus.focus()\n      } else {\n        const focusable = wrapper.querySelectorAll(FOCUSABLE_ELEMENTS)\n\n        focusable.length ? focusable[0].focus() : wrapper.focus()\n      }\n    },\n    beforeOpen() {\n      // console.log('beforeOpen');\n      this.elToFocus = document.activeElement\n      const lastZindex = this.getTopZindex()\n\n      if (animatingZIndex) {\n        this.zIndex = animatingZIndex + 2\n      } else {\n        this.zIndex = lastZindex === 0 ? this.baseZindex : lastZindex + 2\n      }\n      animatingZIndex = this.zIndex\n      this.$emit('before-open')\n    },\n    opening() {\n      // console.log('opening');\n      this.$emit('opening')\n    },\n    afterOpen() {\n      // console.log('afterOpen');\n      this.handleFocus(this.$refs['vm-wrapper'])\n      this.$emit('after-open')\n    },\n    beforeClose() {\n      // console.log('beforeClose');\n      this.$emit('before-close')\n    },\n    closing() {\n      // console.log('closing');\n      this.$emit('closing')\n    },\n    afterClose() {\n      // console.log('afterClose');\n      this.zIndex = 0\n      if (!this.live) {\n        this.mount = false\n      }\n      this.$nextTick(() => {\n        window.requestAnimationFrame(() => {\n          const lastZindex = this.getTopZindex()\n\n          if (lastZindex > 0) {\n            const all = this.getAllVisibleWrappers()\n\n            for (let i = 0; i < all.length; i++) {\n              const wrapper = all[i]\n\n              if (parseInt(wrapper.style.zIndex) === lastZindex) {\n                if (wrapper.contains(this.elToFocus)) {\n                  this.elToFocus.focus()\n                } else {\n                  // console.log(wrapper);\n                  this.handleFocus(wrapper)\n                }\n                break\n              }\n            }\n          } else {\n            if (document.body.contains(this.elToFocus)) {\n              this.elToFocus.focus()\n            }\n          }\n          animatingZIndex = 0\n          this.$emit('after-close')\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.vm-backdrop {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vm-wrapper {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n  outline: 0;\n}\n.vm {\n  position: relative;\n  margin: 0px auto;\n  width: calc(100% - 20px);\n  min-width: 110px;\n  max-width: 500px;\n  background-color: #fff;\n  top: 30px;\n  cursor: default;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n}\n.vm-titlebar {\n  padding: 10px 15px 10px 15px;\n  overflow: auto;\n  border-bottom: 1px solid #e5e5e5;\n}\n.vm-title {\n  margin-top: 2px;\n  margin-bottom: 0px;\n  display: inline-block;\n  font-size: 18px;\n  font-weight: normal;\n}\n.vm-btn-close {\n  color: #ccc;\n  padding: 0px;\n  cursor: pointer;\n  background: 0 0;\n  border: 0;\n  float: right;\n  font-size: 24px;\n  line-height: 1em;\n}\n.vm-btn-close:before {\n  content: '×';\n  font-family: Arial;\n}\n.vm-btn-close:hover,\n.vm-btn-close:focus,\n.vm-btn-close:focus:hover {\n  color: #bbb;\n  border-color: transparent;\n  background-color: transparent;\n}\n.vm-content {\n  padding: 10px 15px 15px 15px;\n}\n.vm-content .full-hr {\n  width: auto;\n  border: 0;\n  border-top: 1px solid #e5e5e5;\n  margin-top: 15px;\n  margin-bottom: 15px;\n  margin-left: -14px;\n  margin-right: -14px;\n}\n.vm-fadeIn {\n  animation-name: vm-fadeIn;\n}\n@keyframes vm-fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.vm-fadeOut {\n  animation-name: vm-fadeOut;\n}\n@keyframes vm-fadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.vm-fadeIn,\n.vm-fadeOut {\n  animation-duration: 0.25s;\n  animation-fill-mode: both;\n}\n</style>\n","<template>\n  <portal v-if=\"mount\" :selector=\"appendTo\">\n    <transition name=\"vm-backdrop-transition\" :enter-active-class=\"bgInClass\" :leave-active-class=\"bgOutClass\">\n      <div\n        v-show=\"show\"\n        :data-vm-backdrop-id=\"id\"\n        class=\"vm-backdrop\"\n        :class=\"bgClass\"\n        :style=\"{ 'z-index': zIndex - 1 }\"\n      ></div>\n    </transition>\n    <transition\n      name=\"vm-transition\"\n      :enter-active-class=\"inClass\"\n      :leave-active-class=\"outClass\"\n      @before-enter=\"beforeOpen\"\n      @enter=\"opening\"\n      @after-enter=\"afterOpen\"\n      @before-leave=\"beforeClose\"\n      @leave=\"closing\"\n      @after-leave=\"afterClose\"\n    >\n      <div\n        v-show=\"show\"\n        ref=\"vm-wrapper\"\n        :data-vm-wrapper-id=\"id\"\n        tabindex=\"-1\"\n        class=\"vm-wrapper\"\n        :class=\"wrapperClass\"\n        :style=\"{ 'z-index': zIndex, cursor: enableClose ? 'pointer' : 'default' }\"\n        role=\"dialog\"\n        :aria-label=\"title\"\n        aria-modal=\"true\"\n        :aria-describedby=\"`${id}-content`\"\n        :aria-labelledby=\"`${id}-title`\"\n        @click=\"clickOutside($event)\"\n        @keydown=\"keydown($event)\"\n      >\n        <div ref=\"vm\" class=\"vm\" :data-vm-id=\"id\" :class=\"modalClass\" :style=\"modalStyle\">\n          <slot name=\"titlebar\">\n            <div class=\"vm-titlebar\">\n              <h3 :id=\"`${id}-title`\" class=\"vm-title\">\n                {{ title }}\n              </h3>\n              <button\n                v-if=\"enableClose\"\n                type=\"button\"\n                class=\"vm-btn-close\"\n                :aria-label=\"closeLabel\"\n                @click.prevent=\"close\"\n              ></button>\n            </div>\n          </slot>\n          <slot name=\"content\">\n            <div :id=\"`${id}-content`\" class=\"vm-content\">\n              <slot></slot>\n            </div>\n          </slot>\n        </div>\n      </div>\n    </transition>\n  </portal>\n</template>\n\n<script>\nimport { Portal } from '@linusborg/vue-simple-portal'\n\nconst TYPE_CSS = {\n  type: [String, Object, Array],\n  default: ''\n}\nconst FOCUSABLE_ELEMENTS =\n  'a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex=\"-1\"])'\nlet animatingZIndex = 0\n\nexport default {\n  name: 'VueModal',\n  components: {\n    Portal\n  },\n  model: {\n    prop: 'basedOn',\n    event: 'close'\n  },\n  props: {\n    title: {\n      type: String,\n      default: ''\n    },\n    baseZindex: {\n      type: Number,\n      default: 1051\n    },\n    bgClass: TYPE_CSS,\n    wrapperClass: TYPE_CSS,\n    modalClass: TYPE_CSS,\n    modalStyle: TYPE_CSS,\n    inClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeIn' }),\n    outClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeOut' }),\n    bgInClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeIn' }),\n    bgOutClass: Object.assign({}, TYPE_CSS, { default: 'vm-fadeOut' }),\n    appendTo: {\n      type: String,\n      default: 'body'\n    },\n    live: {\n      type: Boolean,\n      default: false\n    },\n    enableClose: {\n      type: Boolean,\n      default: true\n    },\n    basedOn: {\n      type: Boolean,\n      default: false\n    },\n    closeLabel: {\n      type: String,\n      default: 'Close'\n    }\n  },\n  data() {\n    return {\n      zIndex: 0,\n      id: null,\n      show: false,\n      mount: false,\n      elToFocus: null\n    }\n  },\n  created() {\n    if (this.live) {\n      this.mount = true\n    }\n  },\n  mounted() {\n    this.id = 'vm-' + this._uid\n    this.$watch(\n      'basedOn',\n      function (newVal) {\n        if (newVal) {\n          this.mount = true\n          this.$nextTick(() => {\n            this.show = true\n          })\n        } else {\n          this.show = false\n        }\n      },\n      {\n        immediate: true\n      }\n    )\n  },\n  beforeDestroy() {\n    this.elToFocus = null\n  },\n  methods: {\n    close() {\n      if (this.enableClose === true) {\n        this.$emit('close', false)\n      }\n    },\n    clickOutside(e) {\n      if (e.target === this.$refs['vm-wrapper']) {\n        this.close()\n      }\n    },\n    keydown(e) {\n      if (e.which === 27 || e.keyCode === 27) {\n        this.close()\n      }\n      if (e.which === 9 || e.keyCode === 9) {\n        // Get only visible elements\n        const all = [].slice.call(this.$refs['vm-wrapper'].querySelectorAll(FOCUSABLE_ELEMENTS)).filter(function (el) {\n          return !!(el.offsetWidth || el.offsetHeight || el.getClientRects().length)\n        })\n\n        if (e.shiftKey) {\n          if (e.target === all[0] || e.target === this.$refs['vm-wrapper']) {\n            e.preventDefault()\n            all[all.length - 1].focus()\n          }\n        } else {\n          if (e.target === all[all.length - 1]) {\n            e.preventDefault()\n            all[0].focus()\n          }\n        }\n      }\n    },\n    getAllVisibleWrappers() {\n      return [].slice.call(document.querySelectorAll('[data-vm-wrapper-id]')).filter((w) => w.display !== 'none')\n    },\n    getTopZindex() {\n      return this.getAllVisibleWrappers().reduce((acc, curr) => {\n        return parseInt(curr.style.zIndex) > acc ? parseInt(curr.style.zIndex) : acc\n      }, 0)\n    },\n    handleFocus(wrapper) {\n      const autofocus = wrapper.querySelector('[autofocus]')\n\n      if (autofocus) {\n        autofocus.focus()\n      } else {\n        const focusable = wrapper.querySelectorAll(FOCUSABLE_ELEMENTS)\n\n        focusable.length ? focusable[0].focus() : wrapper.focus()\n      }\n    },\n    beforeOpen() {\n      // console.log('beforeOpen');\n      this.elToFocus = document.activeElement\n      const lastZindex = this.getTopZindex()\n\n      if (animatingZIndex) {\n        this.zIndex = animatingZIndex + 2\n      } else {\n        this.zIndex = lastZindex === 0 ? this.baseZindex : lastZindex + 2\n      }\n      animatingZIndex = this.zIndex\n      this.$emit('before-open')\n    },\n    opening() {\n      // console.log('opening');\n      this.$emit('opening')\n    },\n    afterOpen() {\n      // console.log('afterOpen');\n      this.handleFocus(this.$refs['vm-wrapper'])\n      this.$emit('after-open')\n    },\n    beforeClose() {\n      // console.log('beforeClose');\n      this.$emit('before-close')\n    },\n    closing() {\n      // console.log('closing');\n      this.$emit('closing')\n    },\n    afterClose() {\n      // console.log('afterClose');\n      this.zIndex = 0\n      if (!this.live) {\n        this.mount = false\n      }\n      this.$nextTick(() => {\n        window.requestAnimationFrame(() => {\n          const lastZindex = this.getTopZindex()\n\n          if (lastZindex > 0) {\n            const all = this.getAllVisibleWrappers()\n\n            for (let i = 0; i < all.length; i++) {\n              const wrapper = all[i]\n\n              if (parseInt(wrapper.style.zIndex) === lastZindex) {\n                if (wrapper.contains(this.elToFocus)) {\n                  this.elToFocus.focus()\n                } else {\n                  // console.log(wrapper);\n                  this.handleFocus(wrapper)\n                }\n                break\n              }\n            }\n          } else {\n            if (document.body.contains(this.elToFocus)) {\n              this.elToFocus.focus()\n            }\n          }\n          animatingZIndex = 0\n          this.$emit('after-close')\n        })\n      })\n    }\n  }\n}\n</script>\n\n<style>\n.vm-backdrop {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n.vm-wrapper {\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow-x: hidden;\n  overflow-y: auto;\n  outline: 0;\n}\n.vm {\n  position: relative;\n  margin: 0px auto;\n  width: calc(100% - 20px);\n  min-width: 110px;\n  max-width: 500px;\n  background-color: #fff;\n  top: 30px;\n  cursor: default;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);\n}\n.vm-titlebar {\n  padding: 10px 15px 10px 15px;\n  overflow: auto;\n  border-bottom: 1px solid #e5e5e5;\n}\n.vm-title {\n  margin-top: 2px;\n  margin-bottom: 0px;\n  display: inline-block;\n  font-size: 18px;\n  font-weight: normal;\n}\n.vm-btn-close {\n  color: #ccc;\n  padding: 0px;\n  cursor: pointer;\n  background: 0 0;\n  border: 0;\n  float: right;\n  font-size: 24px;\n  line-height: 1em;\n}\n.vm-btn-close:before {\n  content: '×';\n  font-family: Arial;\n}\n.vm-btn-close:hover,\n.vm-btn-close:focus,\n.vm-btn-close:focus:hover {\n  color: #bbb;\n  border-color: transparent;\n  background-color: transparent;\n}\n.vm-content {\n  padding: 10px 15px 15px 15px;\n}\n.vm-content .full-hr {\n  width: auto;\n  border: 0;\n  border-top: 1px solid #e5e5e5;\n  margin-top: 15px;\n  margin-bottom: 15px;\n  margin-left: -14px;\n  margin-right: -14px;\n}\n.vm-fadeIn {\n  animation-name: vm-fadeIn;\n}\n@keyframes vm-fadeIn {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n}\n.vm-fadeOut {\n  animation-name: vm-fadeOut;\n}\n@keyframes vm-fadeOut {\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n.vm-fadeIn,\n.vm-fadeOut {\n  animation-duration: 0.25s;\n  animation-fill-mode: both;\n}\n</style>\n"],"names":["url","i","toString","toUpperCase","_typeof","obj","Symbol","iterator","constructor","prototype","config","selector","concat","size","id","Math","random","setSelector","isBrowser","window","undefined","document","TargetContainer","Vue","extend","abstract","name","props","data","vm","updatedNodes","nodes","render","h","this","length","text","tag","destroyed","el","$el","parentNode","removeChild","Portal","disabled","type","Boolean","prepend","String","default","$scopedSlots","created","getTargetEl","insertTargetEl","updated","_this","$nextTick","slotFn","container","beforeDestroy","unmount","watch","immediate","handler","mount","methods","querySelector","parent","child","createElement","substring","appendChild","targetEl","firstChild","insertBefore","propsData","$destroy","use","_Vue","options","arguments","component","defaultSelector","const","TYPE_CSS","Object","Array","FOCUSABLE_ELEMENTS","animatingZIndex","script","components","model","prop","event","title","baseZindex","Number","bgClass","wrapperClass","modalClass","modalStyle","inClass","assign","outClass","bgInClass","bgOutClass","appendTo","live","enableClose","basedOn","closeLabel","zIndex","show","elToFocus","mounted","_uid","$watch","newVal","close","$emit","clickOutside","e","target","$refs","keydown","which","keyCode","all","slice","call","querySelectorAll","filter","offsetWidth","offsetHeight","getClientRects","shiftKey","preventDefault","focus","getAllVisibleWrappers","w","display","getTopZindex","reduce","acc","curr","parseInt","style","handleFocus","wrapper","autofocus","focusable","beforeOpen","activeElement","lastZindex","opening","afterOpen","beforeClose","closing","afterClose","requestAnimationFrame","contains","body","_hoisted_4","class","$data","_createBlock","createBlock","_component_portal","$props","_createVNode","_Transition","persisted","_createElementVNode","createElementVNode","_normalizeClass","onBeforeEnter","$options","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave","ref","tabindex","_normalizeStyle","normalizeStyle","cursor","role","onClick","_cache","$event","onKeydown","_renderSlot","renderSlot","_ctx","_createElementBlock","createElementBlock","apply","args","$slots"],"mappings":"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"}