(function(e,d){typeof exports=="object"&&typeof module!="undefined"?module.exports=d(require("vue")):typeof define=="function"&&define.amd?define(["vue"],d):(e=typeof globalThis!="undefined"?globalThis:e||self,e.VueModal=d(e.Vue))})(this,function(e){"use strict";var d=(()=>`.vm-backdrop{position:fixed;top:0;right:0;bottom:0;left:0;background-color:#00000080}.vm-wrapper{position:fixed;top:0;right:0;bottom:0;left:0;overflow-x:hidden;overflow-y:auto;outline:0}.vm{position:relative;margin:0 auto;width:calc(100% - 20px);min-width:110px;max-width:500px;background-color:#fff;top:30px;cursor:default;box-shadow:0 5px 15px #00000080}.vm-titlebar{padding:10px 15px;overflow:auto;border-bottom:1px solid #e5e5e5}.vm-title{margin-top:2px;margin-bottom:0;display:inline-block;font-size:18px;font-weight:400}.vm-btn-close{color:#ccc;padding:0;cursor:pointer;background:0 0;border:0;float:right;font-size:24px;line-height:1em}.vm-btn-close:before{content:"\\d7";font-family:Arial}.vm-btn-close:hover,.vm-btn-close:focus,.vm-btn-close:focus:hover{color:#bbb;border-color:transparent;background-color:transparent}.vm-content{padding:10px 15px 15px}.vm-content .full-hr{width:auto;border:0;border-top:1px solid #e5e5e5;margin:15px -14px}.vm-fadeIn{-webkit-animation-name:vm-fadeIn;animation-name:vm-fadeIn}@keyframes vm-fadeIn{0%{opacity:0}to{opacity:1}}.vm-fadeOut{-webkit-animation-name:vm-fadeOut;animation-name:vm-fadeOut}@keyframes vm-fadeOut{0%{opacity:1}to{opacity:0}}.vm-fadeIn,.vm-fadeOut{-webkit-animation-duration:.25s;animation-duration:.25s;-webkit-animation-fill-mode:both;animation-fill-mode:both}
`)(),m=(t,i)=>{const o=t.__vccOpts||t;for(const[s,n]of i)o[s]=n;return o};const l={type:[String,Object,Array],default:""},f='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])';let c=0;const u={name:"VueModal",props:{title:{type:String,default:""},baseZindex:{type:Number,default:1051},bgClass:l,wrapperClass:l,modalClass:l,modalStyle:l,inClass:Object.assign({},l,{default:"vm-fadeIn"}),outClass:Object.assign({},l,{default:"vm-fadeOut"}),bgInClass:Object.assign({},l,{default:"vm-fadeIn"}),bgOutClass:Object.assign({},l,{default:"vm-fadeOut"}),appendTo:{type:String,default:"body"},live:{type:Boolean,default:!1},enableClose:{type:Boolean,default:!0},modelValue:{type:Boolean,default:!1},closeLabel:{type:String,default:"Close"}},emits:["before-open","opening","after-open","before-close","closing","after-close","update:modelValue"],data(){return{zIndex:0,id:null,show:!1,mount:!1,elToFocus:null}},created(){this.live&&(this.mount=!0)},mounted(){this.id="vm-"+this.$.uid,this.$watch("modelValue",function(t){t?(this.mount=!0,this.$nextTick(()=>{this.show=!0})):this.show=!1},{immediate:!0})},beforeUnmount(){this.elToFocus=null},methods:{close(){this.enableClose===!0&&this.$emit("update:modelValue",!1)},clickOutside(t){t.target===this.$refs["vm-wrapper"]&&this.close()},keydown(t){if((t.which===27||t.keyCode===27)&&this.close(),t.which===9||t.keyCode===9){const i=[].slice.call(this.$refs["vm-wrapper"].querySelectorAll(f)).filter(function(o){return!!(o.offsetWidth||o.offsetHeight||o.getClientRects().length)});t.shiftKey?(t.target===i[0]||t.target===this.$refs["vm-wrapper"])&&(t.preventDefault(),i[i.length-1].focus()):t.target===i[i.length-1]&&(t.preventDefault(),i[0].focus())}},getAllVisibleWrappers(){return[].slice.call(document.querySelectorAll("[data-vm-wrapper-id]")).filter(t=>t.display!=="none")},getTopZindex(){return this.getAllVisibleWrappers().reduce((t,i)=>parseInt(i.style.zIndex)>t?parseInt(i.style.zIndex):t,0)},handleFocus(t){const i=t.querySelector("[autofocus]");if(i)i.focus();else{const o=t.querySelectorAll(f);o.length?o[0].focus():t.focus()}},beforeOpen(){this.elToFocus=document.activeElement;const t=this.getTopZindex();c?this.zIndex=c+2:this.zIndex=t===0?this.baseZindex:t+2,c=this.zIndex,this.$emit("before-open")},opening(){this.$emit("opening")},afterOpen(){this.handleFocus(this.$refs["vm-wrapper"]),this.$emit("after-open")},beforeClose(){this.$emit("before-close")},closing(){this.$emit("closing")},afterClose(){this.zIndex=0,this.live||(this.mount=!1),this.$nextTick(()=>{window.requestAnimationFrame(()=>{const t=this.getTopZindex();if(t>0){const i=this.getAllVisibleWrappers();for(let o=0;o<i.length;o++){const s=i[o];if(parseInt(s.style.zIndex)===t){s.contains(this.elToFocus)?this.elToFocus.focus():this.handleFocus(s);break}}}else document.body.contains(this.elToFocus)&&this.elToFocus.focus();c=0,this.$emit("after-close")})})}}},b=["data-vm-backdrop-id"],h=["data-vm-wrapper-id","aria-label","aria-describedby","aria-labelledby"],p=["data-vm-id"],v={class:"vm-titlebar"},g=["id"],y=["aria-label"],x=["id"];function w(t,i,o,s,n,a){return n.mount?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:o.appendTo},[e.createVNode(e.Transition,{name:"vm-backdrop-transition","enter-active-class":o.bgInClass,"leave-active-class":o.bgOutClass},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{"data-vm-backdrop-id":n.id,class:e.normalizeClass(["vm-backdrop",o.bgClass]),style:e.normalizeStyle({"z-index":n.zIndex-1})},null,14,b),[[e.vShow,n.show]])]),_:1},8,["enter-active-class","leave-active-class"]),e.createVNode(e.Transition,{name:"vm-transition","enter-active-class":o.inClass,"leave-active-class":o.outClass,onBeforeEnter:a.beforeOpen,onEnter:a.opening,onAfterEnter:a.afterOpen,onBeforeLeave:a.beforeClose,onLeave:a.closing,onAfterLeave:a.afterClose},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{ref:"vm-wrapper","data-vm-wrapper-id":n.id,tabindex:"-1",class:e.normalizeClass(["vm-wrapper",o.wrapperClass]),style:e.normalizeStyle({"z-index":n.zIndex,cursor:o.enableClose?"pointer":"default"}),role:"dialog","aria-label":o.title,"aria-modal":"true","aria-describedby":`${n.id}-content`,"aria-labelledby":`${n.id}-title`,onClick:i[1]||(i[1]=r=>a.clickOutside(r)),onKeydown:i[2]||(i[2]=r=>a.keydown(r))},[e.createElementVNode("div",{ref:"vm",class:e.normalizeClass(["vm",o.modalClass]),"data-vm-id":n.id,style:e.normalizeStyle(o.modalStyle)},[e.renderSlot(t.$slots,"titlebar",{},()=>[e.createElementVNode("div",v,[e.createElementVNode("h3",{id:`${n.id}-title`,class:"vm-title"},e.toDisplayString(o.title),9,g),o.enableClose?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vm-btn-close","aria-label":o.closeLabel,onClick:i[0]||(i[0]=e.withModifiers((...r)=>a.close&&a.close(...r),["prevent"]))},null,8,y)):e.createCommentVNode("",!0)])]),e.renderSlot(t.$slots,"content",{},()=>[e.createElementVNode("div",{id:`${n.id}-content`,class:"vm-content"},[e.renderSlot(t.$slots,"default")],8,x)])],14,p)],46,h),[[e.vShow,n.show]])]),_:3},8,["enter-active-class","leave-active-class","onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])],8,["to"])):e.createCommentVNode("",!0)}var C=m(u,[["render",w]]);return C});
