!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueModal=t(e.Vue)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}for(var n=t(e),o="-_",i=36;i--;)o+=i.toString(36);for(i=36;i---10;)o+=i.toString(36).toUpperCase();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var r={selector:"vue-portal-target-".concat(function(e){var t="";for(i=e||21;i--;)t+=o[64*Math.random()|0];return t}())},s=function(e){return r.selector=e},l="undefined"!=typeof window&&void 0!==("undefined"==typeof document?"undefined":a(document)),d=n.default.extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(e){return{updatedNodes:e.nodes}},render:function(e){var t=this.updatedNodes&&this.updatedNodes();return t?t.length<2&&!t[0].text?t:e(this.tag||"DIV",t):e()},destroyed:function(){var e=this.$el;e.parentNode.removeChild(e)}}),c=n.default.extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(r.selector)}},tag:{type:String,default:"DIV"}},render:function(e){if(this.disabled){var t=this.$scopedSlots&&this.$scopedSlots.default();return t?t.length<2&&!t[0].text?t:e(this.tag,t):e()}return e()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var e=this;this.$nextTick((function(){e.disabled||e.slotFn===e.$scopedSlots.default||(e.container.updatedNodes=e.$scopedSlots.default),e.slotFn=e.$scopedSlots.default}))},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(e){e?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(l)return document.querySelector(this.selector)},insertTargetEl:function(){if(l){var e=document.querySelector("body"),t=document.createElement(this.tag);t.id=this.selector.substring(1),e.appendChild(t)}},mount:function(){var e=this.getTargetEl(),t=document.createElement("DIV");this.prepend&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),this.container=new d({el:t,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});"undefined"!=typeof window&&window.Vue&&window.Vue===n.default&&n.default.use((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.name||"portal",c),t.defaultSelector&&s(t.defaultSelector)}));var u={type:[String,Object,Array],default:""},f='a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex]:not([tabindex="-1"])',p=0,h={name:"VueModal",components:{Portal:c},model:{prop:"basedOn",event:"close"},props:{title:{type:String,default:""},baseZindex:{type:Number,default:1051},bgClass:u,wrapperClass:u,modalClass:u,modalStyle:u,inClass:Object.assign({},u,{default:"vm-fadeIn"}),outClass:Object.assign({},u,{default:"vm-fadeOut"}),bgInClass:Object.assign({},u,{default:"vm-fadeIn"}),bgOutClass:Object.assign({},u,{default:"vm-fadeOut"}),appendTo:{type:String,default:"body"},live:{type:Boolean,default:!1},enableClose:{type:Boolean,default:!0},basedOn:{type:Boolean,default:!1},closeLabel:{type:String,default:"Close"}},data:function(){return{zIndex:0,id:null,show:!1,mount:!1,elToFocus:null}},created:function(){this.live&&(this.mount=!0)},mounted:function(){this.id="vm-"+this._uid,this.$watch("basedOn",(function(e){var t=this;e?(this.mount=!0,this.$nextTick((function(){t.show=!0}))):this.show=!1}),{immediate:!0})},beforeDestroy:function(){this.elToFocus=null},methods:{close:function(){!0===this.enableClose&&this.$emit("close",!1)},clickOutside:function(e){e.target===this.$refs["vm-wrapper"]&&this.close()},keydown:function(e){if(27!==e.which&&27!==e.keyCode||this.close(),9===e.which||9===e.keyCode){var t=[].slice.call(this.$refs["vm-wrapper"].querySelectorAll(f)).filter((function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}));e.shiftKey?e.target!==t[0]&&e.target!==this.$refs["vm-wrapper"]||(e.preventDefault(),t[t.length-1].focus()):e.target===t[t.length-1]&&(e.preventDefault(),t[0].focus())}},getAllVisibleWrappers:function(){return[].slice.call(document.querySelectorAll("[data-vm-wrapper-id]")).filter((function(e){return"none"!==e.display}))},getTopZindex:function(){return this.getAllVisibleWrappers().reduce((function(e,t){return parseInt(t.style.zIndex)>e?parseInt(t.style.zIndex):e}),0)},handleFocus:function(e){var t=e.querySelector("[autofocus]");if(t)t.focus();else{var n=e.querySelectorAll(f);n.length?n[0].focus():e.focus()}},beforeOpen:function(){this.elToFocus=document.activeElement;var e=this.getTopZindex();this.zIndex=p?p+2:0===e?this.baseZindex:e+2,p=this.zIndex,this.$emit("before-open")},opening:function(){this.$emit("opening")},afterOpen:function(){this.handleFocus(this.$refs["vm-wrapper"]),this.$emit("after-open")},beforeClose:function(){this.$emit("before-close")},closing:function(){this.$emit("closing")},afterClose:function(){var e=this;this.zIndex=0,this.live||(this.mount=!1),this.$nextTick((function(){window.requestAnimationFrame((function(){var t=e.getTopZindex();if(t>0)for(var n=e.getAllVisibleWrappers(),o=0;o<n.length;o++){var i=n[o];if(parseInt(i.style.zIndex)===t){i.contains(e.elToFocus)?e.elToFocus.focus():e.handleFocus(i);break}}else document.body.contains(e.elToFocus)&&e.elToFocus.focus();p=0,e.$emit("after-close")}))}))}}},m=["data-vm-backdrop-id"],v=["data-vm-wrapper-id","aria-label","aria-describedby","aria-labelledby"],b=["data-vm-id"],y={class:"vm-titlebar"},g=["id"],C=["aria-label"],w=["id"];return h.render=function(t,n,o,i,a,r){var s=e.resolveComponent("portal");return a.mount?(e.openBlock(),e.createBlock(s,{key:0,selector:o.appendTo},{default:e.withCtx((function(){return[e.createVNode(e.Transition,{name:"vm-backdrop-transition","enter-active-class":o.bgInClass,"leave-active-class":o.bgOutClass,persisted:""},{default:e.withCtx((function(){return[e.withDirectives(e.createElementVNode("div",{"data-vm-backdrop-id":a.id,class:e.normalizeClass(["vm-backdrop",o.bgClass]),style:e.normalizeStyle({"z-index":a.zIndex-1})},null,14,m),[[e.vShow,a.show]])]})),_:1},8,["enter-active-class","leave-active-class"]),e.createVNode(e.Transition,{name:"vm-transition","enter-active-class":o.inClass,"leave-active-class":o.outClass,onBeforeEnter:r.beforeOpen,onEnter:r.opening,onAfterEnter:r.afterOpen,onBeforeLeave:r.beforeClose,onLeave:r.closing,onAfterLeave:r.afterClose,persisted:""},{default:e.withCtx((function(){return[e.withDirectives(e.createElementVNode("div",{ref:"vm-wrapper","data-vm-wrapper-id":a.id,tabindex:"-1",class:e.normalizeClass(["vm-wrapper",o.wrapperClass]),style:e.normalizeStyle({"z-index":a.zIndex,cursor:o.enableClose?"pointer":"default"}),role:"dialog","aria-label":o.title,"aria-modal":"true","aria-describedby":a.id+"-content","aria-labelledby":a.id+"-title",onClick:n[1]||(n[1]=function(e){return r.clickOutside(e)}),onKeydown:n[2]||(n[2]=function(e){return r.keydown(e)})},[e.createElementVNode("div",{ref:"vm",class:e.normalizeClass(["vm",o.modalClass]),"data-vm-id":a.id,style:e.normalizeStyle(o.modalStyle)},[e.renderSlot(t.$slots,"titlebar",{},(function(){return[e.createElementVNode("div",y,[e.createElementVNode("h3",{id:a.id+"-title",class:"vm-title"},e.toDisplayString(o.title),9,g),o.enableClose?(e.openBlock(),e.createElementBlock("button",{key:0,type:"button",class:"vm-btn-close","aria-label":o.closeLabel,onClick:n[0]||(n[0]=e.withModifiers((function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return r.close&&r.close.apply(r,e)}),["prevent"]))},null,8,C)):e.createCommentVNode("v-if",!0)])]})),e.renderSlot(t.$slots,"content",{},(function(){return[e.createElementVNode("div",{id:a.id+"-content",class:"vm-content"},[e.renderSlot(t.$slots,"default")],8,w)]}))],14,b)],46,v),[[e.vShow,a.show]])]})),_:3},8,["enter-active-class","leave-active-class","onBeforeEnter","onEnter","onAfterEnter","onBeforeLeave","onLeave","onAfterLeave"])]})),_:3},8,["selector"])):e.createCommentVNode("v-if",!0)},h.__file="src/Modal.vue",h}));
//# sourceMappingURL=vue-modal.umd.min.js.map
