!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).VueModal=t(e.Vue)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}for(var n=t(e),o="-_",i=36;i--;)o+=i.toString(36);for(i=36;i---10;)o+=i.toString(36).toUpperCase();function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r={selector:"vue-portal-target-".concat(function(e){var t="";for(i=e||21;i--;)t+=o[64*Math.random()|0];return t}())},a=function(e){return r.selector=e},l="undefined"!=typeof window&&void 0!==("undefined"==typeof document?"undefined":s(document)),d=n.default.extend({abstract:!0,name:"PortalOutlet",props:["nodes","tag"],data:function(e){return{updatedNodes:e.nodes}},render:function(e){var t=this.updatedNodes&&this.updatedNodes();return t?t.length<2&&!t[0].text?t:e(this.tag||"DIV",t):e()},destroyed:function(){var e=this.$el;e.parentNode.removeChild(e)}}),u=n.default.extend({name:"VueSimplePortal",props:{disabled:{type:Boolean},prepend:{type:Boolean},selector:{type:String,default:function(){return"#".concat(r.selector)}},tag:{type:String,default:"DIV"}},render:function(e){if(this.disabled){var t=this.$scopedSlots&&this.$scopedSlots.default();return t?t.length<2&&!t[0].text?t:e(this.tag,t):e()}return e()},created:function(){this.getTargetEl()||this.insertTargetEl()},updated:function(){var e=this;this.$nextTick((function(){e.disabled||e.slotFn===e.$scopedSlots.default||(e.container.updatedNodes=e.$scopedSlots.default),e.slotFn=e.$scopedSlots.default}))},beforeDestroy:function(){this.unmount()},watch:{disabled:{immediate:!0,handler:function(e){e?this.unmount():this.$nextTick(this.mount)}}},methods:{getTargetEl:function(){if(l)return document.querySelector(this.selector)},insertTargetEl:function(){if(l){var e=document.querySelector("body"),t=document.createElement(this.tag);t.id=this.selector.substring(1),e.appendChild(t)}},mount:function(){var e=this.getTargetEl(),t=document.createElement("DIV");this.prepend&&e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),this.container=new d({el:t,parent:this,propsData:{tag:this.tag,nodes:this.$scopedSlots.default}})},unmount:function(){this.container&&(this.container.$destroy(),delete this.container)}}});"undefined"!=typeof window&&window.Vue&&window.Vue===n.default&&n.default.use((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.component(t.name||"portal",u),t.defaultSelector&&a(t.defaultSelector)}));var c=0;function f(e,t,n,o,i,s,r,a,l,d){"boolean"!=typeof r&&(l=a,a=r,r=!1);var u,c="function"==typeof n?n.options:n;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,i&&(c.functional=!0)),o&&(c._scopeId=o),s?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=u):t&&(u=r?function(e){t.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,a(e))}),u)if(c.functional){var f=c.render;c.render=function(e,t){return u.call(t),f(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,u):[u]}return n}var p={name:"VueModal",components:{Portal:u},model:{prop:"basedOn",event:"close"},props:{title:{type:String,default:""},baseZindex:{type:Number,default:1051},bgClass:{type:String,default:""},wrapperClass:{type:String,default:""},modalClass:{type:String,default:""},modalStyle:{type:Object,default:function(){return{}}},inClass:{type:String,default:"vm-fadeIn"},outClass:{type:String,default:"vm-fadeOut"},bgInClass:{type:String,default:"vm-fadeIn"},bgOutClass:{type:String,default:"vm-fadeOut"},appendTo:{type:String,default:"body"},live:{type:Boolean,default:!1},enableClose:{type:Boolean,default:!0},basedOn:{type:Boolean,default:!1}},data:function(){return{zIndex:0,id:null,show:!1,mount:!1,elToFocus:null}},created:function(){this.live&&(this.mount=!0)},mounted:function(){this.id="vm-"+this._uid,this.$watch("basedOn",(function(e){var t=this;e?(this.mount=!0,this.$nextTick((function(){t.show=!0}))):this.show=!1}),{immediate:!0})},beforeDestroy:function(){this.elToFocus=null},methods:{close:function(){!0===this.enableClose&&this.$emit("close",!1)},clickOutside:function(e){e.target===this.$refs["vm-wrapper"]&&this.close()},keydown:function(e){if(27===e.which&&this.close(),9===e.which){var t=[].slice.call(this.$refs["vm-wrapper"].querySelectorAll("input, select, textarea, button, a"));t=t.filter((function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)})),e.shiftKey?e.target!==t[0]&&e.target!==this.$refs["vm-wrapper"]||(e.preventDefault(),t[t.length-1].focus()):e.target===t[t.length-1]&&(e.preventDefault(),t[0].focus())}},getTopZindex:function(){for(var e=0,t=document.querySelectorAll(".vm-wrapper"),n=0;n<t.length;n++)"none"!==t[n].display&&(e=parseInt(t[n].style.zIndex)>e?parseInt(t[n].style.zIndex):e);return e},modalsVisible:function(){for(var e=document.querySelectorAll(".vm-wrapper"),t=0,n=0;n<e.length;n++)"none"!==e[n].display&&parseInt(e[n].style.zIndex)>0&&t++;return t},handleFocus:function(e){var t=e.querySelector("[autofocus]");if(t)t.focus();else{var n=e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n.length?n[0].focus():e.focus()}},beforeOpen:function(){this.elToFocus=document.activeElement;var e=this.getTopZindex();this.zIndex=c?c+2:0===e?this.baseZindex:e+2,c=this.zIndex,this.$emit("before-open")},opening:function(){this.$emit("opening")},afterOpen:function(){this.handleFocus(this.$refs["vm-wrapper"]),this.$emit("after-open")},beforeClose:function(){this.$emit("before-close")},closing:function(){this.$emit("closing")},afterClose:function(){var e=this;this.zIndex=0,this.live||(this.mount=!1),this.$nextTick((function(){window.requestAnimationFrame((function(){var t=e.getTopZindex();if(t>0)for(var n=document.querySelectorAll(".vm-wrapper"),o=0;o<n.length;o++){var i=n[o];if("none"!==i.display&&parseInt(i.style.zIndex)===t){i.contains(e.elToFocus)?e.elToFocus.focus():e.handleFocus(i);break}}else document.body.contains(e.elToFocus)&&e.elToFocus.focus();c=0,e.$emit("after-close")}))}))}}},h=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.mount?n("div",[n("portal",{attrs:{selector:e.appendTo}},[n("transition",{attrs:{name:"vm-backdrop-transition","enter-active-class":e.bgInClass,"leave-active-class":e.bgOutClass}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],class:["vm-backdrop",e.id+"-backdrop",e.bgClass],style:{"z-index":e.zIndex-1}})]),e._v(" "),n("transition",{attrs:{name:"vm-transition","enter-active-class":e.inClass,"leave-active-class":e.outClass},on:{"before-enter":e.beforeOpen,enter:e.opening,"after-enter":e.afterOpen,"before-leave":e.beforeClose,leave:e.closing,"after-leave":e.afterClose}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],ref:"vm-wrapper",class:["vm-wrapper",e.wrapperClass,e.id],style:{"z-index":e.zIndex,cursor:e.enableClose?"pointer":"default"},attrs:{tabindex:"0"},on:{click:function(t){return e.clickOutside(t)},keydown:function(t){return e.keydown(t)}}},[n("div",{ref:"vm",class:["vm",e.modalClass],style:e.modalStyle,attrs:{role:"dialog","aria-label":e.title,"aria-modal":"true"}},[e._t("titlebar",[n("div",{staticClass:"vm-titlebar"},[n("h3",{staticClass:"vm-title"},[e._v("\n                "+e._s(e.title)+"\n              ")]),e._v(" "),e.enableClose?n("button",{staticClass:"vm-btn-close",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.close(t)}}}):e._e()])]),e._v(" "),e._t("content",[n("div",{staticClass:"vm-content"},[e._t("default")],2)])],2)])])],1)],1):e._e()};h._withStripped=!0;return f({render:h,staticRenderFns:[]},void 0,p,void 0,!1,void 0,!1,void 0,void 0,void 0)}));
//# sourceMappingURL=vue-modal.umd.min.js.map
